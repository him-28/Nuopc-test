README for Decomp Test NUOPC prototype
--------------------------------------

This prototype tests the efficiency of data distribution when domain 
decomposition is synchronized versus desynchronized. Domains are decomposed
over 256 PETs.

Dependencies:
  - Without Trace IO (default)
      * ESMF v7.0.0r
  - With Trace IO (ESMF_TRACE=ON)
      * ESMF v8.0.0 beta with Trace IO (ESMF branch traceio)
  
Build:
  - Set environment variable ESMFMKFILE to point to the esmf.mk of your ESMF
    installation.
  - Without Trace IO (default)
      * gmake
  - With Trace IO (requires ESMF with Trace IO)
      * gmake ESMF_TRACE=ON
  
Execution:
  - Set Verbosity to desired level in the runconfig file.
  - Enable/Disable domain decomposition synchronization (syncdecomp) in the
    runconfig file.
  - Enable/Disable memory copy (memcopy) in the runconfig file. Memory copy
    will fail if syncdecomp is false.
  - Optionally set environment variable ESMF_RUNTIME_COMPLIANCECHECK to ON.
  - Optionally set environment variable ESMF_RUNTIME_TRACE to ON. 
  - mpirun -np X ./esmApp Y (where X is the total number of PETs and Y is the
    desired runconfig filename.)
  
Output:
  - PET*.Log files containing compliance checker output if turned on.
  - The prototype outputs time stepping information to stdout.

  


Code structure:
  - Makefile           - Makefile that is based on the standard esmf.mk
                         mechanism.
  - atm.F90            - The ATM component, specializing generic NUOPC_Model.
  - ocn.F90            - The OCN component, specializing generic NUOPC_Model.
  - con.F90            - The Connector component, specializing generic
                         NUOPC_Connector.
  - esm.F90            - The Earth System Model (ESM) component, specializing
                         generic NUOPC_Driver.
  - esmApp.F90         - ESM driver application.
  - runconfig.nosync   - Set SyncDecomp and MemCopy to false
  - runconfig.sync     - Set SyncDecomp to true and MemCopy to false
  - runconfig.memcopy  - Set SyncDecomp and MemCopy to true
  - runconfig.error    - Set SyncDecomp to false and MemCopy to true
  - runconfig.default  - Link to runconfig.memcopy
