README for COAMPS NUOPC prototype
---------------------------------------------------

Dependencies: 
  - ESMF v6.1.0bs06 with NUOPC at HEAD
  

Build:
  - Set environment variable ESMFMKFILE to point to the esmf.mk of your ESMF installation.
  - gmake [BOPT=<g|O>]
  - Compile time control of model component modules included in driver (esm.F90) is
    determined by the INCLUDE_<MOD> (MOD = ATM, OCN, WAV, ICE, LND) preprocessor macros.
  

Execution:
  - Optionally set environment variable ESMF_RUNTIME_COMPLIANCECHECK to ON.
    This can be done by setting CHECK=ON on gmake run command line.
  - Optionally set number of processors on command line: NPROC=<nproc>.
    Default nproc is 1.
  - Optionally set name of config file on command line: CONFIG=<config>.
    Default is default.rc
  - gmake run [NPROC=<nproc>] [CONFIG=<config>] [CHECK=<ON|OFF>]
  

Output:
  - PET*.Log files containing compliance checker output if turned on.
  - The prototype outputs time stepping information to stdout.


Code structure:
  - Makefile    - Makefile that is based on the standard esmf.mk mechanism.
  - esmApp.F90  - ESM driver application.
  - esm.F90     - The Driver component, specializing generic NUOPC_Driver.
  - con.F90     - The Connector component, specializing generic NUOPC_Connector.
  - med.F90     - The Mediator component, specializing generic NUOPC_Mediator.
  - modLive.F90 - The Live Model component(s), specializing generic NUOPC_Model.
  - modData.F90 - The Data Model component(s), specializing generic NUOPC_Model.


ESMF Config input for ESM Driver:

  Note that config input labels for models not included at compile time are silently ignored.

  label                                possible
  (colons required)    type            values        default     description
  ------------------------------------------------------------------------------
  startTime:           integer array                 none        start time of ESM driver
                       [YYYY,MM,DD,hh,mm,ss]                     * required

  stopTime:            integer array                 none        stop time of ESM driver
                       [YYYY,MM,DD,hh,mm,ss]                     * required

  timeStep:            integer array                 none        time step of ESM driver
                       [hh,mm,ss]                                * required

  verbose:             logical         t, f          t           turn on verbose output
                                                                 * optional

  medActive:           logical         t, f          t           enable/disable MED model
                                                                 * optional

  <mod>Active:         logical         t, f          t           enable/disable <MOD> model
                                                                 * mod = atm, ocn, wav, ice, lnd
                                                                 * optional

  <mod>Type:           string          live          live        set <MOD> model type
                                       data                      * mod = atm, ocn, wav, ice, lnd
                                                                 * optional
                                                                 * live: actual model
                                                                 * data: from files model

  petLayoutOption:     string          sequential    sequential  set the type of PET layout
                                       concurrent                * optional
                                       specified                 * sequential:
                                                                     active models defined on all PETs
                                                                     active MED defined on all PETs
                                                                     no other config options required
                                                                 * concurrent:
                                                                     active models defined on non-overlapping sets of PETs
                                                                     requires <mod>PetCount input for active models
                                                                     medPetCount optional, default is MED defined on all PETs
                                                                     sum(<mod>PetCount) <= petCount
                                                                 * specified:
                                                                     active models defined on specified sets of PETs
                                                                     requires <mod>PetList input for active models
                                                                     medPetList optional, default is MED defined on all PETs

  medPetCount:         integer         [1,petCount)  none        number of PETs for MED model
                                                                 * optional when petLayoutOption = concurrent & medActive = t

  <mod>PetCount:       integer         [1,petCount)  none        number of PETs for <MOD> model
                                                                 * mod = atm, ocn, wav, ice, lnd
                                                                 * required when petLayoutOption = concurrent & <mod>Active = t

  medPetList::         integer table   [0:petCount)  none        PET list for MED model
                                                                 * optional when petLayoutOption = specified & medActive = t
                                                                 * min(medPetList) >= 0 && max(medPetList) < petCount
                                                                 * table must be terminated with :: on single line

  <mod>PetList::       integer table   [0:petCount)  none        PET list for <MOD> model
                                                                 * mod = atm, ocn, wav, ice, lnd
                                                                 * required when petLayoutOption = specified & <mod>Active = t
                                                                 * min(<mod>PetList) >= 0 && max(<mod>PetList) < petCount
                                                                 * table must be terminated with :: on single line
